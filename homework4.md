# Ред БД

## Введение

Реляционные базы данных, в отличие от баз данных NoSQL, основаны на табличной модели данных и использовании языка SQL для управления данными. Исторически реляционные базы данных были основой многих крупных предприятий, таких как банки, страховые компании и розничные сети. Они обеспечивали надежное хранение и эффективное извлечение данных, что делало их незаменимыми инструментами для бизнес-процессов.

Компании, такие как Oracle, Microsoft и IBM, долгое время были лидерами в области реляционных баз данных, предлагая широкий спектр продуктов и решений для различных потребностей бизнеса. Однако с появлением больших данных и веб-приложений реального времени, реляционные базы данных стали сталкиваться с вызовами масштабируемости и производительности.

Несмотря на это, реляционные базы данных остаются надежным и проверенным инструментом для многих компаний, обеспечивая согласованность данных и стандартизированный подход к их хранению. Важно понимать, что реляционные базы данных не являются устаревшими, а просто представляют один из множества инструментов для работы с данными в современном мире информационных технологий.

В реляционной базе данных хранятся собственно обрабатываемые клиентскими программами данные и метаданные — описания этих данных. Для работы как с данными, так и с метаданными используется язык SQL (иногда произносится «эс-кью-эль» или, чаще, «сиквел») — Structured Query Language,
структурированный язык запросов. В реляционных базах данных все данные хранятся в таблицах. Это один из основных объектов базы
данных. Метаданные, описания объектов реляционной базы данных, также хранятся в таблицах, в системных таблицах.

Для более подробного ознакомления с реляционными бд, пожалуйста, перейдите по этой [ссылке](https://habr.com/ru/companies/vk/articles/266811/).

Ред БД - современная, промышленная, сертифицированная, российская система управления базами данных с открытым кодом компании РЕД СОФТ. СУБД Ред База Данных работает на всех основных платформах и ОС(Windows, Linux, BSD Unix, IBM AIX, HP-UX, Sun Solaris и т. д.), совместима с российскими ОС (РЕД ОС, Astra Linux, Альт Линукс, Rosa Linux), поддерживает многопроцессорные и многоядерные аппаратные платформы, обладает высоким быстродействием (напрямую конкурирует с такими СУБД, как Microsoft SQL Server, Oracle, IBM DB/2). СУБД Ред База Данных поддерживает стандарт SQL:2008 и многие возможности SQL:2016. [Официальный сайт Ред База Данных](https://reddatabase.ru/ru/).

Для начала вам необходимо понять новые возможности и расширения, которые предоставляет данная бд.

1. многопоточная архитектура SuperClassic Server;
2. внешние хранимые процедуры;
3. полнотекстовый поиск;
4. улучшенная подсистема безопасности;
5. JDBC драйвер, входящий в состав Ред Базы Данных, обеспечивает более чем двукратный рост скорости работы приложений по сравнению с оригинальным драйвером Jaybird для ряда задач;
6. добавлена возможность аутентификации пользователей с использованием учётных данных на LDAP-сервере;
7. расширена подсистема аудита.

## Характеристики

- поддержка всех основных платформ и операционных систем (среди них: Windows, семейство Linux, BSD Unix, IBM AIX, HP-UX, Sun Solaris и др.);
- поддержка 64-битных систем;
- поддержка многопроцессорных и многоядерных аппаратных платформ;
- высокое быстродействие;
- возможность хранения базы данных в одном отдельном файле;
- обратная совместимость с базами данных от предыдущих версий Firebird;
- ядро, изначально основанное на многоверсионной архитектуре (MGA);
- полное соответствие принципам атомарности, непротиворечивости, изоляции, долговечности (ACID).

## Где использовать и каково назначение?

- для аутентификации и авторизации пользователей с использованием в качестве источников сведений об учетных записях пользователей защищенной БД пользователей или системного каталога;
- для «горячего» резервного копирования БД и инкрементного резервного копирования, в т.ч. с применением аппаратных решений для резервного копирования;
- для работы во «встроенном» ПО (embedded) в локальном режиме в виде библиотеки DLL без отдельной установки и настройки СУБД Ред База Данных, в том числе поддержка встраивания в виртуальную машину Java;
- для одновременной модификации базы данных несколькими пользователями;
- для реализации многоверсионной архитектуры;
- для реализации модульной архитектуры;
- для расширения функционала самой СУБД посредством модулей.

## История развития

Прародителем Ред Базы Данных можно считать сервер баз данных InterBase, история которого начиналась в 1984 году. В 2000-х годах на основе открытых исходных кодов InterBase 6.0 был создан новый проект — Firebird. СУБД Ред База Данных основана на исходных кодах Firebird, но с рядом доработок и дополнений, отвечающий требованиям ФСТЭК. Разработчики РЕД СОФТ постоянно добавляют в свою СУБД изменения, произошедшие в Firebird, и, в обратную сторону, готовят патчи для Firebird. Они плотно сотрудничают с сообществом Firebird и сами являются соавторами. На картинке видны этапы развития InterBase, Firebird и Ред Базы Данных с 1984 года по настоящий момент.

![Текст с описанием картинки](https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/СУБД_РБД_история.svg/800px-СУБД_РБД_история.svg.png)

Корпорация РЕД СОФТ была основана и приступила к работе в 2006 году. Одной из основных целей деятельности является разработка промышленных систем управления базами данных (СУБД).
В 2007 году корпорация РЕД СОФТ сообщает о выходе СУБД версии 2.0 и начинает официальную поддержку этой сборки в своих дистрибутивах.
В июле 2008 года выходит СУБД Ред База Данных 2.1.0. В качестве основы СУБД используется новое ядро Firebird 2.1, в котором соответственно поддерживаются все его новые возможности и расширения.
В 2012 году выпущена новая версия СУБД Ред База Данных 2.5, где используется новое ядро Firebird 2.5.[6] В этой версии сделан ряд доработок Firebird 2.5, в результате чего обеспечена стабильная и безошибочная работа СУБД под высокой нагрузкой. Эта версия получила сертификат ФСТЭК на соответствие 5 классу защищённости от НСД, по 4 уровню контроля НДВ и возможности использования продукта для построения информационных систем до класса защищённости 1Г включительно и для защиты систем, обрабатывающих персональные данные до 1 класса включительно.
В 2015 году компания РЕД СОФТ выпустила новую версию СУБД Ред База Данных 2.6, а в конце 2017 года версию 3.0, основанную на ядре Firebird 3.0.
В 2015 году СУБД Ред База Данных вошла в пятёрку победителей проекта Минкомсвязи по направлению «Системы управления базами данных»[9]. В рамках премии «Цифровые вершины 2021» сервис «Цифровое исполнительное производство» стал победителем в номинации «Лучший государственный сервис».

Ред База Данных 2.6(2015):

- Синхронная и асинхронная репликация.
- Мониторинг производительности и аудит событий в реальном времени.
- Аудит изменения прав доступа.
- Аутентификация по ГОСТ алгоритмам.
- Интеграция КриптоПро 4.0.
- Аутентификация через LDAP/AD/GSSAPI.
- Полнотекстовый поиск.
- Автономные транзакции.
- Глобальные временные таблицы.
- Внешние хранимые процедуры, триггеры и функции.
- Расширенный набор системных функций.
- Java библиотеки из коробки.
- Контроль целостности исполняемых файлов.
- Улучшенный оптимизатор.

Актуальная версия СУБД Ред База Данных 3.0.11 (15 июня 2023 г.):

- Устранены необязательные индексные чтения. FB-7494.
- Имя пропущенного пространства имен или переменной в RDB$GET/SET_CONTEXT() заключается в кавычки, что делает вывод более читаемым. FB-7539.
- Пути к удалённым в транзакции файловым блобам сохраняются более оптимальным способом, чтобы повысить скорость работы с ними. RS-100024.
- История команд в isql ограничена до 1000 по умолчанию. RS-97526.
- Размер истории для ISQL может быть задан переменной окружения ISQL_HISTSIZE. RS-97526.
- Cтраницы-сироты (orphans) удаляются независимо от наличия ошибок в БД. RS-95971.
- В rdbguard добавлена опция "-t", задающая таймаут ожидания остановки сервера перед убийством его процесса. FB-7468.
- Плагин шифрования баз данных RdbCrypt и функция шифрования баз данных в плагин Crypto_API. RS-70678.
- В пространство имён "SYSTEM" добавлены контекстные переменные "FULL_VERSION" (полная версия сервера) и "EDITION" (редакция). RS-96839.
- Таймаут ожидания остановки сервера перед убийством его процесса увеличен до 30 секунд. RS-96161.
- Возможность вывода планов запросов внутри хранимых процедур, функций и триггеров. RS-90819.
- В аудит добавлены события компиляции процедур, функций и триггеров. RS-90819.
- Максимальное количество значений в списке "IN" увеличено до 4500. Размер стека суперсервера в Windows увеличен до 6 Мб.
- Вывод команды SHOW GRANTS сделан более компактным. RS-89235.

Дорожная карта развития СУБД Ред База Данных:

1. СУБД Ред Базы Данных 5.0 (2024):
   - Профайлер запросов.
   - Международные временные зоны.
   - Поддержка JSON.
   - Планировщик заданий.
   - Табличные пространства.
   - API для пакетных операций.
2. СУБД Ред Базы Данных 6.0 (2025):
   - Встроенный отладчик хранимых процедур.
   - Поддержка геометрических типов данных.
   - Гетерогенные запросы.
   - Поддержка схем.
   - Партицирование.
   - Мульти-мастер репликация.

## Инструменты для взаимодействия и языки программирования

В состав дистрибутива СУБД Ред Базы Данных входят:

- сервер СУБД (исполняемые и исходные коды),
- дополнительные модули расширения СУБД,
- средства инсталляции, настройки и администрирования СУБД.

Скачать дистрибутив СУБД «Ред База Данных» можно с официального сайта «Ред Софт» по [ссылке](http://www.red-soft.ru/)

- ISQL - это утилита командной строки для работы с базами данных «Ред Базы Данных» при помощи языка структурированных запросов (Structured Query Language).

1. Утилита может быть использована для:
   - создания БД
   - создания и изменения метаданных
   - для выполнения различных запросов к БД
2. Утилита может работать в двух режимах: пакетном и интерактивном.

- В пакетном режиме утилита получает на вход файл со скриптом SQL, который содержит одну или несколько команд. По завершении выполнения всех переданных на вход команд утилита завершает свою работу.
- В интерактивном режиме пользователь последовательно вводит команды для работы с базами данных и тут же получает результат их выполнения. При этом одна команда может быть разбита на несколько строк. После завершения обработки каждой команды и вывода всех результатов ее работы пользователь получает приглашение ввести следующую команду до тех пор, пока не будет введена команда выхода из интерактивного режима (exit).
- "HELP" Отображает список команд isql с их описанием.

Информация взята из документации.

![Текст с описанием картинки](https://sun9-21.userapi.com/impg/GL1-ZpBwrV_1zFglmF4IoY_YL0-iSleGTXi8-w/MbU6FWZySQM.jpg?size=827x500&quality=96&sign=d061acecda04c46670cb5ee05bd00678&type=album)

![Текст с описанием картинки](https://sun9-49.userapi.com/impg/1D8kZ_e3Xry4xMt4W9M8VrvAut5wUK07Et1rZw/PLQ7CIWm6sU.jpg?size=810x686&quality=96&sign=e71241d9c67c50ddda7e6d25d99bf3a2&type=album)

## Database engine

СУБД Ред База Данных (Red Database) – промышленная российская система управления базами данных с открытым кодом. Ядро СУБД Ред База Данных построено на основе одной из самых известных и распространенных в мире СУБД с открытым кодом – Firebird. Сама СУБД написана C++.

## Установка, документация и обучение

Скачать Ред БД можно по [ссылке](https://reddatabase.ru/ru/downloads/). Более подробную информацию о установке можно найти [здесь](https://redos.red-soft.ru/base/server-configuring/dbms/rdb_install/).

Документацию можно почитать [здесь](https://www.red-soft.ru/files/downloads/products/2.5.0.11165/docs/SQL_Guide.pdf).

Полезное для обучения будет вот эти видео: [видео1](https://rutube.ru/video/5d2d76a962614cf5e5d0abae902b6537/) и [видео2](https://rutube.ru/video/f367819bd94e99b1afdd00f7318738ec/), в которых показано, как работать с этой СУБД.

## Запросы

Как уже было описано для запросов используется SQL. Приведем примеры запросов:
Создаем базу STAFF с соответсвующими полями и добавляем туда данные:
![Текст с описанием картинки](https://sun1-88.userapi.com/impg/VIIX4TNKJFa3mquQG1iGGYMCDi0q1KuIiOVuwg/SGNu95Dp6lw.jpg?size=1477x486&quality=96&sign=5f5d2bbadf49e800823d083902f29d7a&type=album)

Выполним некоторые операции:
![Текст с описанием картинки](https://sun1-13.userapi.com/impg/qagPB1mmze_65RfIASMpPLw37phwmwQwn152Cw/YOZ4b7926Kw.jpg?size=1413x832&quality=96&sign=d2d9453cf48061f098220778c5355174&type=album)

![Текст с описанием картинки](https://sun9-5.userapi.com/impg/G2o0PUepHgefs_Z8tGDCzLJOWW4BCKAEgoQ26A/8Aa0jENyM9w.jpg?size=1272x817&quality=96&sign=886d22d7f5f152f63d8e657128a4e537&type=album)

В целом все операции делаются аналогично PostgreSQL. Стоит отметить, что можно создавать и многофайловую бд, синтаксис будет таким:
![Текст с описанием картинки](https://sun1-94.userapi.com/impg/9iwiDZdNOXl7YtzbcS8PWXe2SI4_WF5wCm8uKQ/pVSY4t-XxvM.jpg?size=793x213&quality=96&sign=3004a63dd2930e7027e80a840257a3cc&type=album)

## Индексы

Индекс — это объект базы данных, содержащий значения указанных столбцов конкретной таблицы и ссылки на строки этой таблицы, содержащие данные значения. Индекс создается пользователем или системой для конкретной таблицы, что позволяет во многих случаях ускорить процесс поиска данных в этой таблице, а иногда и ускорить упорядочение данных, полученных по запросу пользователя на основании предложения ORDER BY в операторе SELECT. Каждая строка индекса содержит значение столбцов, входящих в состав индекса и указатель на строку в таблице, которая имеет те же самые значения столбцов. При наличии индексов во многих случаях поиск данных может выполняться гораздо быстрее, чем при отсутствии индекса, потому что значения в индексе упорядочены, а сам индекс относительно мал. Не следует создавать индексов для столбцов, которые имеют небольшое количество вариантов значений, например для столбцов, имеющих два значения, в частности, для столбцов, моделирующих логический тип данных, где столбец может иметь только значения TRUE и FALSE, или в случае задания пола человека — мужской или женский. Такие индексы только занимают место во внешней памяти и не дают никакого выигрыша в производительности при выполнении операций выборки и упорядочения данных. Для ограничений первичного ключа, уникального ключа и внешнего ключа система автоматически строит индексы. Как правило, использование индексов не является столь важной задачей в такой системе управления базами данных, как Ред База Данных, поскольку сервер базы данных имеет возможности оптимизации своей работы и при отсутствии соответствующих индексов. Индекс может быть создан как уникальный (ключевое слово UNIQUE). В этом случае в таблице не допускается присутствие двух различных строк, имеющих одинаковое значение столбцов, входящих в состав уникального индекса.
Индекс может быть упорядочен по возрастанию значений столбцов, входящих в его состав (ASCENDING — значение по умолчанию) или по убыванию этих значений (DESCENDING). В любой момент времени работы с базой данных индекс может быть сделан активным (ACTIVE), то есть все изменения столбцов таблицы, входящих в состав этого индекса, тут же отражаются в самом индексе, или неактивным (INACTIVE), когда никакие изменения в строках соответствующей таблицы базы данных не затрагивают содержание индекса.

Приведем примеры создания и использования индексов:
![Текст с описанием картинки](https://sun9-51.userapi.com/impg/vmnFLcEQ8jfu_u9_3FptEKWAd5Jjf5FGu02V2w/LKxKEh78CN8.jpg?size=836x93&quality=96&sign=7c757795daaf1028295a77586b0a5473&type=album)

1. Создание:

```
CREATE ASCENDING INDEX ON PEOPLE ASC_PEOPLE (LAST_NAME);
```

2. Изменение:

```
ALTER INDEX ASC_PEOPLE INACTIVE;
```

3. Удаление:

```
DROP INDEX ASC_PEOPLE;
```

4. Селективность:

```
SET STATISTICS INDEX ASC_PEOPLE;
```

(Оператор улучшает, оптимизирует селективность указанного индекса) 5. Примечание:

```
COMMENT ON INDEX ASC_PEOPLE IS
'Индекс, упорядоченный по возрастанию фамилий людей';
```

## Процесс выполнения запросов

Процесс включает в себя несколько компонентов, взаимодействующих между собой:

1. Оператор SQL запускается в клиентской программе и передаётся по сети на сервер базы данных.
2. Когда сервер базы данных получает SQL-оператор, реляционный движок начинает его обработку.
3. Оптимизатор запросов просматривает дерево запросов и определяет наиболее эффективный способ выполнения SQL-оператора, создавая план выполнения.
4. План выполнения передаётся исполнителю запроса, который использует его для координации получения или изменения данных в соответствии с запросом SQL.
5. Движок хранилища использует методы доступа — протоколы чтения и записи данных, наиболее эффективные для выполнения различных операций.
6. При чтении данных менеджер буферов проверяет, кэшированы ли нужные данные в памяти, и при необходимости извлекает их с диска.
7. При записи данных со вставкой или обновлением менеджер транзакций следит за тем, чтобы изменения происходили атомарно и сохраняли целостность базы данных.
8. В то же время менеджер блокировок накладывает блокировки, чтобы несколько транзакций могли выполняться одновременно, не конфликтуя между собой.

Работая вместе, эти компоненты обеспечивают надёжную и эффективную обработку запросов в системе управления базами данных.

## План запросов

Это не что иное какпоследовательность запросов,необходимых для получения результата запроса. В Ред БД План разделяется на 2 стадии:

1. Выборка результатов;
2. Сортировка и группировка(опциональная стадия, которая выполняется, если не найдено путей доступа для получения результата в запрошенном порядке), выполнение агрегаций.

Выборка результатов выполняется следующими способами:

- Вложенные циклы;
- Слияние.

Теперь разберемся поподробнее:

### Вложенные циклы

Вложенные циклы — вложенные итеративные процессы поиска данных в каждой из соединяемых таблиц.

Внешний цикл извлекает все необходимые строки из внешней таблицы. Если часть или все ограничения для внешней таблицы могут быть использованы для поиска по индексу, то на каждой итерации цикла в индексе ищутся расположения всех необходимых строк и выполняется прямой доступ к таблице. В противном случае таблица сканируется целиком. Оставшиеся ограничения используются для фильтрации выбранных строк. Для каждой оставшейся строки вызывается внутренний цикл.

Внутренний цикл по условиям соединения и данным внешнего цикла ищет строки во внутренней таблице. Если часть или все ограничения для внутренней таблицы, а также ограничения, полученные от внешнего цикла, могут быть использованы для поиска по индексу, то на каждой итерации цикла в индексе ищутся расположения всех необходимых строк и выполняется прямой доступ к таблице. В противном случае таблица сканируется целиком. Оставшиеся ограничения используются для фильтрации выбранных строк.

Циклы могут вкладываться произвольное число раз. В этом случае внутренний цикл становится внешним для следующего цикла и т. д.

На каждой итерации самого глубокого цикла выбранные из таблиц строки конкатенируются, для получения одной строки итогового результата.

Если для некоторого цикла выполняется поиск по индексу, и всех колонок в индексе достаточно для получения итогового результата, то прямой доступ к таблице в этом цикле не выполняется.

### Слияние

Если объединяемые таблицы имеют индексы по сравниваемым полям, то объединение может быть выполнено с помощью слияния. Оба индекса сканируются и в них ищутся одинаковые значения. Если колонок в индексах достаточно для получения итогового результата, то чтение таблиц не выполняется. В противном случае выполняется прямой доступ к сливаемым таблицам для получения колонок, не входящих в индексы, но необходимых для получения результата.

Если слияния недостаточно для получения итогового результата, то для каждой строки, полученной слиянием, может выполняться до двух серий вложенных циклов, соответственно, для каждой из сливаемых таблиц.

За счет того, что в индексах данные отсортированы, слияние дешевле вложенных циклов, но план выполнения не может начинаться со слияния.

### Рассмотрим пример для лучшего понимания:

```
SELECT *
FROM Продажи
ORDER BY Номер_продавца
```

план выполнения:

1. Сканирование кластерного индекса для первичного ключа таблицы Продажи.
2. Сортировка результатов шага 1 по столбцу Номер_продавца.
3. Возврат приложению результатов шага 2.

Оптимизатор запросов использует хранящуюся в базе данных вместе с таблицами и индексами статистическую информацию, на основе которой он оценивает альтернативные способы формирования результатов запроса. Например, команду ORDER BY в инструкции SELECT можно выполнить с использованием имеющегося в базе индекса, либо же путём физической сортировки строк. Оптимизатор старается выбрать самый эффективный план выполнения запроса. Изучение планов выполнения запросов, созданных оптимизатором, позволяет решить, как ускорить выполнение запроса — изменить сам запрос или создать в базе данных дополнительный индекс.

## Транзакции

В первую очередь это механизм, позволяющий объединить группу действий, выполняемых с данными или метаданными базы данных, в один логический блок. Все действия, выполненные в одном блоке, можно или подтвердить или отменить. Действия в рамках одной транзакции переводят базу данных из одного непротиворечивого состояния в другое непротиворечивое состояние.
Классическими проблемами при наличии нескольких клиентов, одновременно работающих с одной базой
данных на сервере, являются следующие:

1. Потеря изменений (lost updates). Возникает, когда один клиент изменяет данные в одной строке таблицы и подтверждает эти изменения, а другой клиент вскоре после этого вносит иные изменения в ту же самую строку. Сохранятся последние изменения. Первый клиент без переоткрытия набора данных (а в некоторых случаях и без перезапуска транзакции) не увидит последние изменения, выполненные вторым клиентом.
2. Невоспроизводимые чтения (non-reproducible reads). Один клиент читает старые версии уже измененных другими параллельными процессами записей, не видя актуального состояния базы данных, в том числе и новых строк.
3. Фантомные строки (phantom rows). Это строки, удаленные в других параллельных процессах, но которые все еще видны в текущей транзакции.
4. Перекрывающиеся транзакции (interleaved transactions), или побочные эффекты изменений (update side effects). В этом случае изменение данных одним клиентом приводят к нарушениям базы данных, которые видимы другим клиентам.

Есть еще теоретическая проблема грязного чтения (dirty read), когда транзакция может видеть неподтвержденные изменения строк. В СУБД Ред База Данных такой проблемы не существует. Неподтвержденные изменения нельзя увидеть ни в какой транзакции с любым уровнем изоляции.

Схема запуска транзакции:

![Текст с описанием картинки](https://sun9-78.userapi.com/impg/lPt_NJ5Ua8yA8xGdg9U-B9jb57P0RUxGno28Ig/I3qOjyMRlW0.jpg?size=557x302&quality=96&sign=d1074f903653cf9400d15cc0c3cdf52e&type=album)

```
SET TRANSACTION
READ WRITE
WAIT ISOLATION LEVEL SNAPSHOT;
```

Транзакция с такими же характеристиками по умолчанию автоматически запускается системой, если пользователь, выполняя обращение к данным базы данных, не запустил никакой транзакции. Основными характеристиками транзакции являются: режим доступа к данным (READ WRITE(операции в контексте данной транзакции могут быть как операциями
чтения, так и операциями изменения данных; используется по умолчанию), READ ONLY(могут выполняться только операции выборки данных SELECT)), режим разрешения блокировок (WAIT(транзакция будет ожидать завершения конкурирующей транзакции путем ее подтверждения (COMMIT) или отката (ROLLBACK)), NO WAIT(транзакция немедленно вызовет исключение базы данных)) с возможным дополнительным уточнением (LOCK TIMEOUT), уровень изоляции (ISOLATION LEVEL) и средства резервирования или освобождения таблиц(предложение RESERVING(резервирует указанные в списке таблицы, то есть запрещает другим транзакциям вносить в эти таблицы изменения)).

Немного поговорим про уровни изоляций.

### SNAPSHOT

Этот уровень изоляции транзакции является уровнем изоляции по умолчанию — когда при старте клиентом новой транзакции уровень ее изоляции в операторе SET TRANSACTION не указывается. При уровне изоляции SNAPSHOT транзакция получает «мгновенный снимок» базы данных, соответствующий существующему на момент старта транзакции состоянию базы данных — количеству строк всех таблиц базы данных и их содержанию. Транзакция видит только подтвержденные версии всех изменений.

### SNAPSHOT TABLE STABILITY

Уровень изоляции SNAPSHOT TABLE STABILITY похож на уровень изоляции SNAPSHOT только за тем лишь исключением, что при этом уровне изоляции другим параллельно выполняющимся транзакциям запрещено выполнять любые изменения во всех таблицах базы данных. Такая транзакция имеет исключительное, монопольное право на внесение любых изменений в данные базы данных.

### READ COMMITTED

Пожалуй, это наиболее часто используемый уровень изоляции для транзакций в случае использования многопользовательской системы обработки данных, когда много одновременно выполняющихся клиентских процессов работают с одной базой данных, находящейся на сервере, и должны постоянно иметь точные сведения об изменениях в таблицах базы данных, вносимых другими параллельными процессами.

Как и во всех реляционных бд есть механизмы подтверждения и отката транзакций.

```
COMMIT [WORK]
[RELEASE] [RETAIN [SNAPSHOT]];
```

При выполнении этого оператора подтверждаются все изменения в данных, выполненные в контексте данной транзакции.

```
ROLLBACK
 [TO SAVEPOINT <имя точки сохранения>] [WORK]
 [RETAIN];
```

При выполнении оператора отменяются все изменения данных базы данных (добавление, изменение, удаление), выполненные под управлением этой транзакции.

```
SAVEPOINT <имя точки сохранения>;
```

Имя точки сохранения — обычный идентификатор базы данных, который может содержать до 31 символа. Имена точек сохранения, созданных в контексте одной транзакции, должны отличаться. Если же в операторе SAVEPOINT создается точка сохранения с именем, уже присутствующем в списке созданных точек сохранения в процессе активности данной транзакции, то новое состояние базы данных связывается с этой точкой сохранения. Все последующие точки сохранения удаляются.

```
RELEASE SAVEPOINT <имя точки сохранения> [ONLY];
```

Оператор удаляет указанную по ее имени точку сохранения из списка. Если не указано ключевое слово ONLY, то удаляются и все последующие точки сохранения. Ключевое слово ONLY задает удаление только одной указанной точки сохранения без какого-либо влияния на другие последующие.

```
ROLLBACK TO SAVEPOINT <имя точки сохранения> [WORK];
```

Оператор отменяет только те изменения, которые были сделаны в базе данных в контексте данной транзакции после создания указанной точки сохранения. Все последующие точки сохранения удаляются. Транзакция продолжает оставаться активной, как если бы было задано ключевое слово RETAIN.

## Методы восстановления

Важно понимать, что системы баз данных, как и любая другая компьютерная система, подвержены сбоям, но хранящиеся в них данные должны быть доступны по мере необходимости. При сбое базы данных она должна обладать средствами быстрого восстановления. Он также должен обладать атомарностью, т. е. либо транзакции успешно завершаются и фиксируются (результат постоянно записывается в базу данных), либо транзакция не должна оказывать влияния на базу данных. Методы восстановления базы данных используются в системах управления базами данных для восстановления базы данных до согласованного состояния после сбоя или ошибки. Основная цель методов восстановления - обеспечить целостность и согласованность данных и предотвратить их потерю. В Ред БД есть 2 метода восстановления: метод отката и метод восстановления с фиксацией.

### Метод отката

Основан на принципе резервного копирования или отмены последствий транзакции, которая не была успешно завершена из-за системного сбоя или ошибки. Этот метод достигается путем отмены изменений, внесенных транзакцией, с использованием записей журнала, хранящихся в журнале транзакций. Журнал транзакций содержит запись всех транзакций, которые были выполнены в базе данных. Система использует записи журнала для отмены изменений, внесенных неудачной транзакцией, и восстановления базы данных в ее предыдущее состояние.

### Метод восстановления с фиксацией

Основан на принципе повторного применения изменений, внесенных успешно завершенной транзакцией, к базе данных. Этот метод достигается путем использования записей журнала, хранящихся в журнале транзакций, для повторного внесения изменений, внесенных транзакцией, которая выполнялась на момент сбоя или ошибки. Система использует записи журнала для повторного применения изменений, внесенных транзакцией, и восстановления базы данных до ее последнего согласованного состояния.

В целом, методы восстановления необходимы для обеспечения согласованности и доступности данных в системе управления базами данных, и каждый метод имеет свои преимущества и ограничения, которые необходимо учитывать при проектировании системы восстановления.

## Партицирование и шардинг

Как было показано выше в плане развития на 2025 год у Ред БД стоит задача добавить партицирование и шардинг, поэтому сейчас такие технологии не реализованы :(

## Data Mining and Data Warehousing

Рассмотрим каждый термин в отдельности.

### Data Mining

Data mining, также называемый Обнаружение знаний в базе данных (KDD), представляет собой метод, часто используемый для анализа больших массивов данных с помощью статистических и математических методов для поиска скрытых закономерностей или тенденций и извлечения из них ценности. Data mining — это целостный процесс сбора, отбора, очистки, преобразования и извлечения данных для оценки закономерностей и, в конечном итоге, для извлечения ценности. Автоматизируя процесс, инструменты data mining могут просматривать базы данных и эффективно выявлять скрытые закономерности. Для предприятий data mining часто используется для выявления закономерностей и взаимосвязей в данных, помогающих принимать оптимальные решения в бизнесе.

![Текст с описанием картинки](https://habrastorage.org/r/w1560/webt/pz/jo/vy/pzjovyrydn1xayy5tdqoof7hoca.png)

В Ред БД этот процесс реализовывается с помощью следующих этапов:

1. #### Очистка данных
   В реальном мире данные не всегда очищаются и структурируются. Часто они шумные, неполные и могут содержать ошибки. Чтобы удостовериться, что результат data mining точный, сначала необходимо очистить данные. Некоторые методы очистки включают заполнение недостающих значений, автоматический и ручной контроль и т.д.
2. #### Интеграция данных
   Это этап, на котором данные из разных источников извлекаются, комбинируются и интегрируются. Источниками могут быть базы данных, текстовые файлы, электронные таблицы, документы, многомерные массивы данных, интернет и так далее.
3. #### Выборка данных
   Обычно не все интегрированные данные необходимы в data mining. Выборка данных — это этап, в котором из большой базы данных выбираются и извлекаются только полезные данные.
4. #### Преобразование данных
   После выбора данных они преобразуются в подходящие для добычи формы. Этот процесс включает в себя нормализацию, агрегирование, обобщение и т.д.
5. #### Интеллектуальный анализ данных
   Здесь наступает самая важная часть data mining — использование интеллектуальных методов для поиска закономерностей в них. Процесс включает регрессию, классификацию, прогнозирование, кластеризацию, изучение ассоциаций и многое другое.
6. #### Оценка модели
   Этот этап направлен на выявление потенциально полезных, простых в понимании шаблонов, а также шаблонов, подтверждающих гипотезы.
7. #### Представление знаний
   На заключительном этапе полученная информация представлена в привлекательном виде с применением методов представления знаний и визуализации.

### Data Warehousing

Поясним термин. Big Data собирается из разных источников. Объемы информации растут быстрыми темпами, и ее где-то нужно хранить для дальнейшей обработки. Одним из подходов для хранения выступает Data Warehouse. Изначально эта база данных была специально разработана для бизнес-целей, поэтому она хорошо структурирована и легка в понимании и использовании. Data Warehouse представляет собой хранилище разных данных, которые уже отсортированы и преобразованы. То есть у пользователя есть сбор всей необходимой информации, которая хранится в файлах или папках. Данный подход позволяет легче и быстрее использоваться данные для принятия решений.
В Ред БД этот процесс реализовывается с помощью следующих этапов:

1. Извлечение самих данных – вся информация от источников переходит в отдельную Базу данных и приводится к единому формату.
2. Преобразование данных – информация подготавливается для хранения в оптимальной форме.
3. Загрузка и обновление данных – данные помещаются в хранилище.
4. Анализ данных.
5. Результаты анализа данных.

## Методы защиты

В Ред БД довольно серьезно проработали вопрос защиты данных. В основе механизмов разграничения доступа лежат имена пользователей и имена групп пользователей. Каждый пользователь имеет уникальное имя, под которым он входит в систему (логируется). Кроме того, в системе создается некоторое число групп пользователей, причем каждый пользователь может быть включен в одну или несколько групп. Создает и удаляет группы суперпользователь, он же может изменять состав участников той или иной группы. Члены разных групп могут иметь разные права по доступу к файлам, например, группа администраторов может иметь больше прав, чем группа программистов. В индексном дескрипторе каждого файла записаны имя так называемого владельца файла и группы, которая имеет права на этот файл. Первоначально, при создании файла его владельцем объявляется тот пользователь, который этот файл создал. Точнее — тот пользователь, от чьего имени запущен процесс, создающий файл. Группа тоже назначается при создании файла — по идентификатору группы процесса, создающего файл. Алгоритм проверки прав пользователя при обращении к файлу можно описать следующим образом. Система вначале проверяет, совпадает ли имя пользователя с именем владельца файла. Если эти имена совпадают (т. е. владелец обращается к своему файлу), то проверяется, имеет ли владелец соответствующее право доступа: на чтение, на запись или на выполнение (не удивляйтесь, суперпользователь может лишить некоторых прав и владельца файла). Если право такое есть, то соответствующая операция разрешается. Если же нужного права владелец не имеет, то проверка прав, предоставляемых через группу или через группу атрибутов доступа для остальных пользователей, уже даже не проверяются, а пользователю выдается сообщение о невозможности выполнения затребованного действия. В Ред БД также реализовано шифрование файлов.Пользователем генерируется личный ключ, который потом будет использоваться для шифрования. Соответсвенно для расшифровки данных нужно знать ключ и пароль от ключа, который использовался в момент шифрования.

## Сообщество Ред БД

Это очень быстро растущая и развивающаяся компания. Она часто проводит конференции, где собираются разные разработчики.

![Текст с описанием картинки](https://sun9-65.userapi.com/impg/EbdXnGwCk94eI6B2WFR4qp3PelJNIH81lOkG2g/VcC_8IS-HRg.jpg?size=1835x727&quality=96&sign=ee35068a46a64cadd106123b16bd7d81&type=album)

Например, ближайшая конференция состоится 6 июня, туда можно записаться и посетить ее, чтобы задать интересующие вопросы и узнать много нового. Кроме того, Ред БД дает возможность пройти курс по администрированию(он еще и бесплатный).

![Текст с описанием картинки](https://sun9-73.userapi.com/impg/gYpuKlqxXWkyQ8ZBiSdDT7Ln3MR4yOZlQTOjjg/LgOeRyOjPiM.jpg?size=1613x636&quality=96&sign=a8b1f6fb77fbe1caaf7136800e1afcf7&type=album)

В целом компания открыта к новым пользователям, и она даже предлагает помощь в миграции на российскую БД, причем вся кодовая база открыта, т.е. в ней можно копаться и разбираться, более того на ютубе очень много обучающих видео. Есть телеграмм [канал](https://t.me/reddatabase). Здесь выкладываются новости и мысли разработчиков(можно подписаться и быть в курсе всех новостей). Также регулярно выкладываются статьи в [дзене](https://zen.yandex.ru/id/62375e12f9b0e05f72de8e1b). Компания настолько открыта, что на своем официальном [сайте](https://reddatabase.ru/ru/secupdate/) разместила информацию по уязвимостям, с которыми они сейчас борятся, при этом можно обратиться и обсудить свою идею решения проблемы:)
Для углубления в тему в самом начале были даны ссылки на видеоуроки, также там приложена документация(она примерно на 300 страниц, так что за несколько дней можно полностью погрузиться в происходящее).

## Итог

В качестве итога можно сказать, что Ред БД - это очень хорошая реализация классичесокой реляционной СУБД. Привлекает открытось компании к общению, очень понятная документация с примерами и схемами, благодаря чему процесс изучения становится интересным и привлекательным. Очень советую разобраться с российской реализацией реляционной субд и в конечном итоге перейти на ее использование, ведь тогда ваша разработка станет простой и понятной не только для вас, но и для ваших коллег :)
